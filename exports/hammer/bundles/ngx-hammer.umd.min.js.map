{"version":3,"sources":["ng://ngx-hammer/lib/hammer.directive.ts","ng://ngx-hammer/lib/hammer.module.ts"],"names":["gestures","directions","HammerDirective","el","this","prototype","ngOnChanges","changes","currentValue","createHammerManager","createHammerRecognizer","ngOnDestroy","mc","elementInstance","hammer","handler","off","ngHammer","event","Object","keys","handlers","length","destroy","nativeElement","Hammer","Manager","recognizer","recognizerType","find","gesture","get","capitalize","recognizeWith","recognizers","add","options","direction","guardDirections","console","warn","on","log","str","charAt","toUpperCase","slice","hammerDirection","indexOf","hasOwnProperty","Directive","args","selector","ElementRef","Input","HammerModule","NgModule","imports","CommonModule","declarations","exports"],"mappings":"uZAWA,IAAMA,EAAW,CAAC,MAAO,MAAO,QAAS,QAAS,SAAU,SACtDC,EAAa,CACjB,KACA,OACA,OACA,QACA,aACA,WACA,oBAYA,SAAAC,EAAoBC,GAAAC,KAAAD,GAAAA,SAEpBD,EAAAG,UAAAC,YAAA,SAAYC,GACNA,GAAWA,EAAO,UAAaA,EAAO,SAAUC,eAClDJ,KAAKK,sBACLL,KAAKM,2BAITR,EAAAG,UAAAM,YAAA,WACE,IAAIC,EAAaR,KAAKS,gBAAgBC,OAClCF,EAAGG,SACLH,EAAGE,OAAOE,IAAIZ,KAAKa,SAASC,MAAON,EAAGG,SAEnCI,OAAOC,KAAKR,EAAGS,UAAUC,SAC5BV,EAAGW,UACHX,EAAK,OAITV,EAAAG,UAAAI,oBAAA,WACEL,KAAKS,gBAAkBT,KAAKD,GAAGqB,cAC1BpB,KAAKS,gBAAgBC,SACxBV,KAAKS,gBAAgBC,OAAS,IAAIW,EAAOC,QAAQtB,KAAKS,mBAI1DX,EAAAG,UAAAK,uBAAA,WACE,IASIiB,EAAYC,EATVhB,EAAaR,KAAKS,gBAAgBC,OAGlCI,EAAQd,KAAKa,SAASC,MACvBA,GAMLU,EAAiB5B,EAAS6B,KAAK,SAAAC,GAAW,OAAAA,IAAYZ,OAKtDS,EAAaf,EAAGmB,IAAIH,OAElBD,EAAa,IAAIF,EAAQrB,KAAK4B,WAAWJ,MAC9BK,cAAcrB,EAAGsB,aAC5BtB,EAAGuB,IAAIR,IAGTA,EAAWS,QAAQC,UAAYjC,KAAKkC,gBAClClC,KAAKa,SAASoB,WAGqB,mBAA1BjC,KAAKa,SAASF,SACvBH,EAAGG,QAAU,KACbwB,QAAQC,KACN,uDACEpC,KAAKa,SAASF,UAGlBH,EAAG6B,GAAGvB,EAAQN,EAAGG,QAAUX,KAAKa,SAASF,SAE3CwB,QAAQG,OAvBNH,QAAQC,KAAK,oCAAsCtB,GAPnDqB,QAAQC,KAAK,kDAiCTtC,EAAAG,UAAA2B,oBAAWW,GACjB,OAAOA,EAAIC,OAAO,GAAGC,cAAgBF,EAAIG,MAAM,IAGzC5C,EAAAG,UAAAiC,yBAAgBD,GACtB,GAAyB,iBAAdA,EAAwB,CACjC,IAAMU,EAAkB,aAAeV,EAAUQ,cACjD,IACmC,EAAjC5C,EAAW+C,QAAQX,IACnBZ,EAAOwB,eAAeF,GAEtB,OAAOtB,EAAOsB,GAEdR,QAAQC,KAAK,mCAAqCH,yBAxFzDa,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,0DAnBVC,EAAAA,gDAsBCC,EAAAA,cC1BHC,EAAA,oDAICC,EAAAA,SAAQL,KAAA,CAAC,CACRM,QAAS,CAACC,EAAAA,cACVC,aAAc,CAACzD,GACf0D,QAAS,CAAC1D,SAPZ","sourcesContent":["import Hammer from 'hammerjs';\nimport {\n  Directive,\n  Input,\n  ElementRef,\n  OnChanges,\n  SimpleChanges,\n  OnDestroy\n} from '@angular/core';\nimport { NgHammerConfig } from './model';\n\nconst gestures = ['tap', 'pan', 'pinch', 'press', 'rotate', 'swipe'];\nconst directions = [\n  'up',\n  'down',\n  'left',\n  'right',\n  'horizontal',\n  'vertical',\n  'all'\n];\n\n@Directive({\n  selector: '[ngHammer]'\n})\nexport class HammerDirective implements OnChanges, OnDestroy {\n  @Input()\n  ngHammer: NgHammerConfig;\n\n  elementInstance: any;\n\n  constructor(private el: ElementRef) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes && changes.ngHammer && changes.ngHammer.currentValue) {\n      this.createHammerManager();\n      this.createHammerRecognizer();\n    }\n  }\n\n  ngOnDestroy() {\n    let mc: Hammer = this.elementInstance.hammer;\n    if (mc.handler) {\n      mc.hammer.off(this.ngHammer.event, mc.handler);\n    }\n    if (!Object.keys(mc.handlers).length) {\n      mc.destroy();\n      mc = null;\n    }\n  }\n\n  createHammerManager() {\n    this.elementInstance = this.el.nativeElement;\n    if (!this.elementInstance.hammer) {\n      this.elementInstance.hammer = new Hammer.Manager(this.elementInstance);\n    }\n  }\n\n  createHammerRecognizer() {\n    const mc: Hammer = this.elementInstance.hammer;\n\n    // determine event type\n    const event = this.ngHammer.event;\n    if (!event) {\n      console.warn('[ngx-hammer] event type argument is required.');\n      return;\n    }\n\n    let recognizer, recognizerType;\n    recognizerType = gestures.find(gesture => gesture === event);\n    if (!recognizerType) {\n      console.warn('[ngx-hammer] invalid event type: ' + event);\n      return;\n    }\n    recognizer = mc.get(recognizerType);\n    if (!recognizer) {\n      recognizer = new Hammer[(this.capitalize(recognizerType))]();\n      recognizer.recognizeWith(mc.recognizers);\n      mc.add(recognizer);\n    }\n\n    recognizer.options.direction = this.guardDirections(\n      this.ngHammer.direction\n    );\n\n    if (typeof this.ngHammer.handler !== 'function') {\n      mc.handler = null;\n      console.warn(\n        '[ngx-hammer] invalid handler function for v-hammer: ' +\n          this.ngHammer.handler\n      );\n    } else {\n      mc.on(event, (mc.handler = this.ngHammer.handler));\n    }\n    console.log();\n  }\n\n  private capitalize(str: string) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  private guardDirections(direction: string) {\n    if (typeof direction === 'string') {\n      const hammerDirection = 'DIRECTION_' + direction.toUpperCase();\n      if (\n        directions.indexOf(direction) > -1 &&\n        Hammer.hasOwnProperty(hammerDirection)\n      ) {\n        return Hammer[hammerDirection];\n      } else {\n        console.warn('[ngx-hammer] invalid direction: ' + direction);\n      }\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HammerDirective } from './hammer.directive';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [HammerDirective],\n  exports: [HammerDirective]\n})\nexport class HammerModule {}\n"]}